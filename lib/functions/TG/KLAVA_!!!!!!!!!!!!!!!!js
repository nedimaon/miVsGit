//Стартовая клавиатура 0
var mesId = { messageId : msg.payload.messageId };
context.flow.MessID = mesId;
flow.set("mID",mesId,"memoryOnly");
var opts = {
  reply_to_message_id: msg.payload.messageId,
  reply_markup: JSON.stringify({
    "inline_keyboard": [[
                {
                    "text": "Yes",
                    "callback_data": "D_A"            
                }, 
                {
                    "text": "No",
                    "callback_data": "D_B"            
                },
                {
                    "text": "X3",
                    "callback_data": "D_C"            
                }]
            ]
  })
};
msg.payload.content = 'Что можно здесь?';
msg.payload.options = opts;
return [ msg ];

//Клавиатура +1
//var messageId = flow.get("ID","memoryOnly");
var messageId = context.flow.get.mID;
var reply_markup = JSON.stringify({
    "inline_keyboard": [[
                {
                    "text": "Arddddddde?",
                    "callback_data": "D_A"            
                }, 
                {
                    "text": "No",
                    "callback_data": "N_C"            
                },           
                                {
                    "text": "Nooo",
                    "callback_data": "D_B"            
                }]
            ]
  });
var options = {
    chat_id : msg.payload.chatId,
    reply_markup : reply_markup,
    message_id : messageId
};
msg.payload.type = 'editMessageReplyMarkup';
msg.payload.content = reply_markup;
msg.payload.options = options;
return [ msg ];


//Клавиатура +2
var dd = { messageId : msg.payload.messageId };
flow.set("MessID",dd,"memoryOnly");
var opts = {
  reply_to_message_id: msg.payload.messageId,
  reply_markup: JSON.stringify({
    "inline_keyboard": [[
                {
                    "text": "Yes",
                    "callback_data": "D_A"            
                }, 
                {
                    "text": "No",
                    "callback_data": "N_A"            
                },
                {
                    "text": "X3",
                    "callback_data": "D_B"            
                }]
            ]
  })
};
msg.payload.content = 'Do you want to hide the inline keyboard?';
msg.payload.options = opts;
return [ msg ];

// This is a sample of how to send a second inline keyboard with modified buttons
var reply_markup = JSON.stringify({
    "inline_keyboard": [[
                {
                    "text": "GGGGGGG?",
                    "callback_data": "D_B"            
                }, 
                {
                    "text": "No",
                    "callback_data": "N_C"            
                }, 
                {
                    "text": "DA",
                    "callback_data": "D_C"            
                }]
            ]
  });
var options = {
    chat_id : msg.payload.chatId,
    reply_markup : reply_markup,
    message_id : messageId
};
msg.payload.type = 'editMessageReplyMarkup';
msg.payload.content = reply_markup;
msg.payload.options = options;
return [ msg ];

msg.payload.type = 'answerCallbackQuery';
msg.payload.options = {
    text : msg.payload.content + 'drynxrsrutbbstrx',
    show_alert : true,  // you can set this to true to open a dialog with the answer in the client.
};
return msg;

msg.payload.type = 'deleteMessage';
//msg.payload.content = flow.get("MessID","memoryOnly");
    msg.payload.content = context.flow.MessID.messageId
    context.flow.MessID.messageId = null;